{
  "entities": {
    "onboardingResponse": {
      "title": "Onboarding Response",
      "description": "Stores responses from the pre-login onboarding flow.",
      "type": "object",
      "properties": {
        "userId": {
          "type": "string",
          "description": "The user's ID from Firebase Auth."
        },
        "grade": {
          "type": "string",
          "description": "The user's selected grade."
        },
        "board": {
          "type": "string",
          "description": "The educational board the user is studying under.",
          "enum": ["cbse", "icse", "other"]
        },
        "troublingSubjects": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "The subjects the user finds most troubling."
        },
        "studyTime": {
          "type": "string",
          "description": "How much time the user can study daily."
        },
        "studySchedule": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "The times of day the user usually studies."
        },
        "biggestProblems": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "The biggest problems the user is facing."
        },
        "nextExamDate": {
          "type": "string",
          "description": "The date of the user's next exam, or 'Not Sure Yet'."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp of when the record was created."
        }
      },
      "required": ["userId", "createdAt"]
    },
    "UserProfile": {
      "title": "User Profile",
      "description": "Stores user profile information.",
      "type": "object",
      "properties": {
        "uid": {
          "type": "string",
          "description": "The user's unique ID."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "The user's email address."
        },
        "displayName": {
          "type": "string",
          "description": "The user's unique, editable username."
        },
        "photoURL": {
          "type": "string",
          "format": "uri",
          "description": "URL for the user's profile picture."
        },
        "usernameIsSet": {
            "type": "boolean",
            "description": "True if the user has set their initial username."
        },
        "currentStreak": {
          "type": "number",
          "description": "The user's current study streak in days."
        },
        "highestStreak": {
          "type": "number",
          "description": "The user's all-time highest study streak."
        },
        "lastActivityDate": {
          "type": "string",
          "format": "date-time",
          "description": "The date of the user's last completed activity."
        },
        "totalXp": {
            "type": "number",
            "description": "The user's all-time total experience points."
        },
        "weeklyXp": {
            "type": "number",
            "description": "The user's experience points earned in the current week."
        },
        "lastXpReset": {
            "type": "string",
            "format": "date-time",
            "description": "The timestamp when the weekly XP was last reset."
        }
      },
      "required": ["uid", "email"]
    },
    "Quiz": {
      "title": "Quiz",
      "description": "Represents a quiz with a title and description.",
      "type": "object",
      "properties": {
        "title": {
          "type": "string",
          "description": "The title of the quiz."
        },
        "description": {
          "type": "string",
          "description": "A brief description of the quiz."
        }
      },
      "required": ["title"]
    },
    "Question": {
      "title": "Question",
      "description": "A single question within a quiz.",
      "type": "object",
      "properties": {
        "text": {
          "type": "string",
          "description": "The question text."
        },
        "options": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "A list of possible answers."
        },
        "correctAnswerIndex": {
          "type": "number",
          "description": "The index of the correct answer in the options array."
        }
      },
      "required": ["text", "options", "correctAnswerIndex"]
    }
  },
  "auth": {
    "providers": ["email-password", "google"]
  },
  "firestore": {
    "/onboardingResponses/{userId}": {
      "schema": {
        "$ref": "#/backend/entities/onboardingResponse"
      },
      "description": "Stores individual user responses from the onboarding flow."
    },
    "/users/{userId}": {
      "schema": {
        "$ref": "#/backend/entities/UserProfile"
      },
      "description": "Stores public user profile information."
    },
    "/quizzes/{quizId}": {
      "schema": {
        "$ref": "#/backend/entities/Quiz"
      },
      "description": "Stores quiz metadata."
    },
    "/quizzes/{quizId}/questions/{questionId}": {
      "schema": {
        "$ref": "#/backend/entities/Question"
      },
      "description": "Stores the questions for a specific quiz."
    }
  }
}
